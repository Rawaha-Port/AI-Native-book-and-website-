# باب 3: کائیمیٹکس، ڈائنامکس اور کنٹرول

## 3.1 تعارف
پچھلے باب میں روبوٹ ہارڈویئر کی سمجھ کے ساتھ، اب ہم اپنی توجہ اس طرف مرکوز کرتے ہیں کہ یہ مکینیکل ڈھانچے اصل میں کیسے حرکت کرتے ہیں۔ یہ باب ان بنیادی اصولوں کی گہرائی میں جاتا ہے جو روبوٹ کی حرکت کو کنٹرول کرتے ہیں: کائیمیٹکس، ڈائنامکس، اور کنٹرول۔ کائیمیٹکس حرکت کو قوتوں پر غور کیے بغیر بیان کرتی ہے، ڈائنامکس قوتوں اور ٹارک کو تصویر میں لاتی ہے، اور کنٹرول روبوٹ کو مطلوبہ حرکات پر عمل درآمد کروانے کا فن اور سائنس ہے۔ ہیومنائڈ روبوٹس کے لیے، یہ تصورات خاص طور پر ان کی پیچیدہ، متحرک طور پر غیر مستحکم نوعیت کی وجہ سے چیلنجنگ ہیں۔ اس باب کے آخر تک، آپ ان ریاضیاتی آلات اور کنٹرول کی حکمت عملیوں کو سمجھ جائیں گے جو روبوٹس کو خوبصورتی اور درستگی کے ساتھ حرکت کرنے کے قابل بناتے ہیں۔

## 3.2 نظریاتی بنیادیں

### 3.2.1 کائیمیٹکس
کائیمیٹکس مکینیکل سسٹمز میں حرکت کا مطالعہ ہے، خاص طور پر روبوٹ کے حصوں کے درمیان جیومیٹرک تعلقات پر توجہ مرکوز کرتا ہے۔ یہ حرکت کا سبب بننے والی قوتوں یا لمحات پر غور کیے بغیر ہر لنک اور جوڑ کی پوزیشن، رفتار اور سرعت کو بیان کرتا ہے۔

- **فارورڈ کائیمیٹکس (FK)**:
    - **تعریف**: روبوٹ کے جوڑوں کے زاویے (یا پرزمیٹک جوڑوں کے لیے پوزیشنز) دیے جانے پر، فارورڈ کائیمیٹکس روبوٹ کے اینڈ-ایفیکٹر (جیسے ہاتھ یا گرپر) کی پوزیشن اور سمت کو ایک مقررہ بیس فریم کے نسبت سے شمار کرتی ہے۔
    - **ڈیناویٹ-ہارٹنبرگ (DH) پیرامیٹرز**: روبوٹ مینیپلیٹر کے لنکس کو منظم طریقے سے کوآرڈینیٹ فریم تفویض کرنے کے لیے ایک وسیع پیمانے پر استعمال ہونے والا کنونشن، جو FK مساوات کے اخذ کو آسان بناتا ہے۔ اس میں ہر لنک کے لیے چار پیرامیٹرز (a, α, d, θ) کا ایک سیٹ شامل ہے۔
    - **اطلاق**: یہ جاننے کے لیے استعمال ہوتا ہے کہ جب جوڑوں کے زاویوں کا حکم دیا جاتا ہے تو روبوٹ کا ہاتھ کہاں ہوتا ہے۔

- **انورس کائیمیٹکس (IK)**:
    - **تعریف**: روبوٹ کے اینڈ-ایفیکٹر کی مطلوبہ پوزیشن اور سمت دیے جانے پر، انورس کائیمیٹکس اس پوز کو حاصل کرنے کے لیے درکار متعلقہ جوڑوں کے زاویوں کا حساب لگاتی ہے۔
    - **چیلنجز**:
        - **متعدد حل**: اکثر، جوڑوں کے زاویوں کے کئی درست سیٹ ہو سکتے ہیں جو ایک ہی اینڈ-ایفیکٹر پوز حاصل کرتے ہیں (جیسے "کہنی اوپر" بمقابلہ "کہنی نیچے")۔
        - **واحدیت (Singularities)**: کچھ روبوٹ کنفیگریشنز (جیسے مکمل طور پر پھیلا ہوا بازو) لامحدود یا کوئی حل نہ ہونے کا باعث بن سکتی ہیں، جس سے کنٹرول مشکل ہو جاتا ہے۔
        - **کوئی تجزیاتی حل نہیں**: پیچیدہ روبوٹس کے لیے، تجزیاتی (بند شکل) حل موجود نہیں ہو سکتے، جس کے لیے تکراری عددی طریقوں کی ضرورت ہوتی ہے۔
    - **اطلاق**: روبوٹ کو خلا میں ایک مخصوص نقطہ تک پہنچنے کا حکم دینے کے لیے استعمال کیا جاتا ہے (جیسے "کپ کے لیے پہنچو")۔

### 3.2.2 ڈائنامکس
ڈائنامکس حرکت اور اس کا سبب بننے والی قوتوں اور ٹارک کا مطالعہ ہے۔ روبوٹس کے لیے، ڈائنامکس کو سمجھنا یہ پیش گوئی کرنے کے لیے بہت اہم ہے کہ روبوٹ لاگو قوتوں پر کیسا ردعمل ظاہر کرے گا، مضبوط کنٹرولرز ڈیزائن کرنے، اور استحکام کو یقینی بنانے کے لیے۔

- **نیوٹن-یولر فارمولیشن**: حرکت کی مساوات کو اخذ کرنے کا ایک تکراری طریقہ۔ اس میں قوتوں اور لمحات کو لنک سے لنک تک پھیلانا شامل ہے، جو بیس یا اینڈ-ایفیکٹر سے شروع ہوتا ہے۔ یہ اکثر کنٹرول کے لیے استعمال ہوتا ہے جہاں قوتوں کا عین مطابق حساب لگانے کی ضرورت ہوتی ہے۔
- **لیگرینجین فارمولیشن**: توانائی (حرکی اور ممکنہ) کے تصور پر مبنی۔ یہ عام طور پر حرکت کی مساوات کو اخذ کرنے کے لیے زیادہ منظم ہے، خاص طور پر پیچیدہ سسٹمز کے لیے، اور اکثر ایک زیادہ کمپیکٹ شکل کا باعث بنتا ہے۔
- **کمیت، جڑت، کشش ثقل**: یہ بنیادی طبعی خصوصیات ایک اہم کردار ادا کرتی ہیں۔
    - **کمیت (Mass)**: کسی جسم میں مادے کی مقدار۔
    - **جڑت (Inertia)**: کسی شے کی اپنی حرکت کی حالت میں تبدیلیوں کے خلاف مزاحمت کا ایک پیمانہ۔
    - **کشش ثقل (Gravity)**: وہ قوت جو کمیتوں کو ایک دوسرے کی طرف کھینچتی ہے، جو دوپایہ حرکت اور توازن پر نمایاں طور پر اثر انداز ہوتی ہے۔

### 3.2.3 کنٹرول
کنٹرول تھیوری ایسے سسٹمز کو ڈیزائن کرنے سے متعلق ہے جو فیڈ بیک کی بنیاد پر ان پٹس میں ہیرا پھیری کرکے مطلوبہ رویے کو حاصل کرتے ہیں۔ روبوٹس کے لیے، مقصد یہ ہے کہ انہیں ایک منصوبہ بند راستے پر چلایا جائے یا مطلوبہ حالت کو برقرار رکھا جائے۔

- **اوپن لوپ بمقابلہ کلوزڈ لوپ کنٹرول**:
    - **اوپن لوپ**: کنٹرولر سینسر فیڈ بیک کا استعمال کیے بغیر کمانڈ بھیجتا ہے۔ سادہ لیکن خلل اور ماڈل کی غلطیوں کا شکار۔ (جیسے "موٹر کو 1 سیکنڈ کے لیے 5V بھیجیں")۔
    - **کلوزڈ لوپ (فیڈ بیک کنٹرول)**: کنٹرولر اصل حالت کی پیمائش کرنے کے لیے سینسر ڈیٹا کا استعمال کرتا ہے، اسے مطلوبہ حالت سے موازنہ کرتا ہے، اور غلطی کو کم کرنے کے لیے اپنی کمانڈز کو ایڈجسٹ کرتا ہے۔ یہ مضبوط روبوٹ کنٹرول کے لیے ضروری ہے۔ (جیسے "موٹر کو اس وقت تک حرکت دیں جب تک کہ انکوڈر 90 ڈگری نہ پڑھ لے")۔

- **PID کنٹرول (تناسبی-انٹیگرل-ڈیریویٹیو)**:
    - ایک وسیع پیمانے پر استعمال ہونے والا کلوزڈ لوپ کنٹرول الگورتھم۔
    - **تناسبی (P)**: اس کی موجودہ قدر کی بنیاد پر غلطی کو درست کرتا ہے۔
    - **انٹیگرل (I)**: اس کی جمع شدہ ماضی کی قدروں کی بنیاد پر غلطی کو درست کرتا ہے، جو مستقل حالت کی غلطیوں کو ختم کرنے میں مدد کرتا ہے۔
    - **ڈیریویٹیو (D)**: موجودہ غلطی کی تبدیلی کی شرح کی بنیاد پر مستقبل کی غلطیوں کی پیش گوئی کرتا ہے، جو ارتعاش کو کم کرنے اور ردعمل کے وقت کو بہتر بنانے میں مدد کرتا ہے۔
    - **ٹیوننگ**: صحیح P, I, اور D گینز تلاش کرنا بہت اہم ہے اور اکثر آزمائش اور غلطی یا زیادہ منظم طریقوں سے کیا جاتا ہے۔

- **ٹریجکٹری جنریشن**:
    - روبوٹ کے جوڑوں یا اینڈ-ایفیکٹر کے لیے ایک ہموار، وقت کے پیرامیٹر والا راستہ منصوبہ بندی کرنا۔
    - قابل عمل اور محفوظ حرکت کو یقینی بنانے کے لیے جوڑوں کی حدود، رفتار کی حدود، اور سرعت کی حدود پر غور کیا جاتا ہے۔

- **ہیومنائڈز کے لیے توازن اور حرکت کا کنٹرول**:
    - **زیرو مومنٹ پوائنٹ (ZMP)**: دوپایہ استحکام کے لیے ایک کلیدی تصور۔ یہ زمین پر وہ نقطہ ہے جہاں کشش ثقل اور جڑواں قوتوں کی وجہ سے خالص لمحہ صفر ہوتا ہے۔ مستحکم چلنے کے لیے، ZMP کو سپورٹ پولی گون (زمین کے ساتھ رابطے میں پاؤں کے ذریعے بیان کردہ علاقہ) کے اندر رہنا چاہیے۔
    - **سینٹر آف پریشر (CoP)**: نتیجہ خیز زمینی ردعمل قوت کا مقام۔ متحرک استحکام کے لیے، CoP کو احتیاط سے منظم کرنے کی ضرورت ہے۔

## 3.3 عملی اطلاقات اور مثالیں

### 3.3.1 روبوٹ بازو کی ہیرا پھیری
کائیمیٹکس اور کنٹرول روبوٹ بازو کی ہیرا پھیری کے لیے بنیادی ہیں۔ جب ایک روبوٹ کو کسی چیز کو اٹھانے کا حکم دیا جاتا ہے، تو اس عمل میں اکثر شامل ہوتا ہے:
1. **انورس کائیمیٹکس**: گرپر کو چیز کے مقام پر پوزیشن دینے کے لیے درکار جوڑوں کے زاویوں کا حساب لگانا۔
2. **ٹریجکٹری جنریشن**: موجودہ کنفیگریشن سے ہدف کنفیگریشن تک جوڑوں کے زاویوں کے لیے ایک ہموار راستہ منصوبہ بندی کرنا۔
3. **کلوزڈ لوپ کنٹرول**: ہر جوڑ پر PID کنٹرولرز کا استعمال کرکے یہ یقینی بنانا کہ روبوٹ پیدا کردہ ٹریجکٹری پر عین مطابق عمل کرتا ہے، انکوڈر فیڈ بیک کی بنیاد پر غلطیوں کو مسلسل درست کرتا ہے۔

### 3.3.2 ہیومنائڈ کا چلنا
ہیومنائڈز میں دوپایہ حرکت سب سے پیچیدہ کنٹرول چیلنجوں میں سے ایک ہے۔ اس میں شامل ہے:
1. **متحرک توازن**: گرنے سے بچنے کے لیے روبوٹ کے مرکز کمیت کو مسلسل منتقل کرنا اور زیرو مومنٹ پوائنٹ (ZMP) کو کنٹرول کرنا۔
2. **چال کی پیداوار**: پاؤں کی جگہ اور جسم کی حرکات کا ایک سلسلہ منصوبہ بندی کرنا جو ایک مستحکم چلنے کا نمونہ تشکیل دیتا ہے۔
3. **پورے جسم کا کنٹرول**: توازن برقرار رکھتے ہوئے اور خلل پر ردعمل ظاہر کرتے ہوئے حرکات پر عمل درآمد کرنے کے لیے بیک وقت سینکڑوں موٹرز اور حسی ان پٹس کو مربوط کرنا۔ بوسٹن ڈائنامکس کے ایٹلس جیسے روبوٹس جدید ترین پورے جسم کی کنٹرول حکمت عملیوں کے ذریعے جدید چلنے، دوڑنے اور چھلانگ لگانے کی صلاحیتوں کا مظاہرہ کرتے ہیں۔

## 3.4 عملی مشقیں

### مشق 3.1: 2R پلانر بازو کے لیے فارورڈ کائیمیٹکس کا حساب
دو لنکس L1 اور L2 کی لمبائی والے 2-ڈگری-آف-فریڈم (2R) پلانر روبوٹک بازو پر غور کریں۔ پہلا جوڑ بیس کے گرد گھومتا ہے، اور دوسرا جوڑ پہلے لنک کے نسبت سے گھومتا ہے۔
1. بازو بنائیں اور کوآرڈینیٹ فریم تفویض کریں۔
2. جوڑوں کے زاویے θ1 اور θ2 دیے جانے پر اینڈ-ایفیکٹر کی (x, y) پوزیشن تلاش کرنے کے لیے فارورڈ کائیمیٹکس مساوات اخذ کریں۔
3. L1=1m, L2=1m, θ1=30°, θ2=45° کے لیے اینڈ-ایفیکٹر کی پوزیشن کا حساب لگائیں۔

### مشق 3.2: PID ٹیوننگ منظر نامہ
آپ PID کنٹرولر کا استعمال کرتے ہوئے روبوٹ بازو کے ایک جوڑ کو کنٹرول کر رہے ہیں۔ روبوٹ کو 0 سے 90 ڈگری تک حرکت کرنے کا حکم دیا گیا ہے۔
- **منظر نامہ الف**: جوڑ ہدف سے نمایاں طور پر آگے نکل جاتا ہے اور بسنے سے پہلے کئی بار گھومتا ہے۔ اس اوور شوٹ اور ارتعاش کو کم کرنے کے لیے آپ بنیادی طور پر کون سا PID گین ایڈجسٹ کریں گے، اور کس سمت میں (بڑھائیں/گھٹائیں)؟ وضاحت کریں کیوں۔
- **منظر نامہ ب**: جوڑ آہستہ آہستہ ہدف کے قریب پہنچتا ہے لیکن کبھی بھی بالکل 90 ڈگری تک نہیں پہنچتا، ہمیشہ تھوڑا نیچے بس جاتا ہے۔ آپ کون سا PID گین ایڈجسٹ کریں گے، اور کس سمت میں؟ وضاحت کریں کیوں۔

## 3.5 پروگرامنگ لیب

### 3.5.1 ماحول کو ترتیب دینا
پچھلے ابواب کی طرح، یقینی بنائیں کہ Python اور `pybullet` انسٹال ہیں۔

### 3.5.2 کوڈ کا ٹکڑا: PyBullet میں سادہ فارورڈ کائیمیٹکس (FK) اور جوائنٹ کنٹرول
یہ اسکرپٹ ایک سادہ روبوٹک بازو لوڈ کرے گا اور یہ ظاہر کرے گا کہ اس کے جوڑوں کو ایک مخصوص کنفیگریشن حاصل کرنے کے لیے کیسے کنٹرول کیا جائے اور پھر PyBullet کی بلٹ ان FK صلاحیتوں کا استعمال کرتے ہوئے اینڈ-ایفیکٹر کی پوزیشن کو کیسے حاصل کیا جائے۔

```python
import pybullet as p
import pybullet_data
import time

# Set up the simulation environment
p.connect(p.GUI)
p.setAdditionalSearchPath(pybullet_data.getDataPath())
p.setGravity(0, 0, -9.81)
p.loadURDF("plane.urdf")

# Load a simple KUKA LBR iiwa arm model (often used in examples)
# If this URDF is not found, you might need to specify a path to a valid robotic arm URDF
robotId = p.loadURDF("kuka_lbr_iiwa/model.urdf", [0, 0, 0])

# Get joint information for the robot
num_joints = p.getNumJoints(robotId)
joint_names = [p.getJointInfo(robotId, i)[1].decode('utf-8') for i in range(num_joints)]
print(f"Loaded robot with {num_joints} joints: {joint_names}")

# Define target joint angles (in radians) for the KUKA arm
# This is an example; adjust based on the specific robot's joint limits
target_joint_angles = [0.0, -0.5, 0.0, 1.5, 0.0, -0.7, 0.0] # Example pose

# Set the robot to the target joint angles
for i in range(len(target_joint_angles)):
    # Use position control for each joint
    p.setJointMotorControl2(
        bodyUniqueId=robotId,
        jointIndex=i,
        controlMode=p.POSITION_CONTROL,
        targetPosition=target_joint_angles[i],
        maxVelocity=0.5 # Limit velocity for smoother movement
    )

# Run simulation for a few steps to allow the robot to reach the pose
for _ in range(240): # Simulate for 1 second at 240Hz
    p.stepSimulation()
    time.sleep(1./240.)

# Get the link state (position and orientation) of the end-effector
# For KUKA LBR iiwa, link 6 is typically the end-effector (0-indexed)
end_effector_link_index = 6
link_state = p.getLinkState(robotId, end_effector_link_index)
end_effector_position = link_state[0]
end_effector_orientation_quat = link_state[1] # Quaternion

print(f"\nEnd-effector position: {end_effector_position}")
print(f"End-effector orientation (quaternion): {end_effector_orientation_quat}")

# Convert quaternion to Euler angles for more intuitive understanding (optional)
end_effector_orientation_euler = p.getEulerFromQuaternion(end_effector_orientation_quat)
print(f"End-effector orientation (Euler - roll, pitch, yaw): {end_effector_orientation_euler}")

# Keep the simulation open for a few seconds
print("\nSimulation will close in 5 seconds.")
time.sleep(5)
p.disconnect()
```
**وضاحت:**
- `p.loadURDF("kuka_lbr_iiwa/model.urdf", [0, 0, 0])`: KUKA LBR iiwa روبوٹک بازو کا ایک ماڈل لوڈ کرتا ہے۔ اگر `pybullet_data` میں یہ شامل نہیں ہے تو آپ کو راستہ ایڈجسٹ کرنے یا اپنا URDF استعمال کرنے کی ضرورت پڑ سکتی ہے۔
- `p.setJointMotorControl2(..., controlMode=p.POSITION_CONTROL, targetPosition=...)`: یہ فنکشن جوائنٹ کنٹرول کے لیے کلیدی ہے۔ یہاں، ہم ہر جوڑ کو ایک مطلوبہ پوزیشن پر سیٹ کرتے ہیں۔ PyBullet کا فزکس انجن پھر اس پوزیشن پر جوڑ کو حرکت دینے کے لیے ٹارک لگائے گا۔
- `p.getLinkState(robotId, end_effector_link_index)`: یہ فنکشن آپ کے لیے فارورڈ کائیمیٹکس انجام دیتا ہے۔ روبوٹ ID اور ایک مخصوص لنک کا انڈیکس (اکثر اینڈ-ایفیکٹر) دیے جانے پر، یہ عالمی کوآرڈینیٹس میں اس کی پوزیشن اور سمت لوٹاتا ہے۔

## 3.6 باب کا خلاصہ
اس باب نے کائیمیٹکس، ڈائنامکس، اور کنٹرول کی گہرائی میں جا کر روبوٹس کیسے حرکت کرتے ہیں اس کو سمجھنے کی بنیاد رکھی۔ ہم نے فارورڈ اور انورس کائیمیٹکس کے درمیان فرق کیا، سابقہ جوائنٹ اسپیس کو ٹاسک اسپیس پر میپ کرتا ہے اور مؤخر الذکر اس کا الٹ کرتا ہے۔ ہم نے دریافت کیا کہ ڈائنامکس، جو کمیت، جڑت، اور کشش ثقل سے متاثر ہوتی ہے، روبوٹ کے قوتوں پر طبعی ردعمل کا تعین کرتی ہے۔ آخر میں، ہم نے فیڈ بیک کنٹرول، خاص طور پر PID کنٹرولرز، کے اہم کردار کو متعارف کرایا تاکہ یہ یقینی بنایا جا سکے کہ روبوٹس مطلوبہ حرکات کو درست اور مستحکم طریقے سے انجام دیتے ہیں۔ ہیومنائڈز کے لیے، یہ تصورات خاص طور پر دوپایہ حرکت اور ماہرانہ ہیرا پھیری جیسے پیچیدہ رویوں کو حاصل کرنے کے لیے بہت اہم ہیں، جو اگلے ابواب میں ذہانت کو مربوط کرنے کے لیے اسٹیج تیار کرتے ہیں۔

## 3.7 مزید مطالعہ
- **کتابیں**:
  - `روبوٹ ڈائنامکس اینڈ کنٹرول` از مارک ڈبلیو سپونگ، سیٹھ ہچنسن، اور ایم۔ ودیاساگر۔
  - `ماڈرن روبوٹکس: مکینکس، پلاننگ، اینڈ کنٹرول` از کیون ایم۔ لنچ اور فرینک سی۔ پارک۔ (آن لائن مفت دستیاب ہے)۔
- **آن لائن کورسز/ٹیوٹوریلز**:
  - **MIT اوپن کورس ویئر**: "روبوٹکس کا تعارف"
  - **یوٹیوب چینلز**: روبوٹکس کائیمیٹکس اور PID کنٹرول پر عملی مظاہروں کے لیے ٹیوٹوریلز تلاش کریں۔
